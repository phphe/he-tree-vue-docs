<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>教程 | he-tree-vue</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-7876M7VJS1"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-7876M7VJS1');</script>
    <meta name="description" content="可拖拽可排序vue树形组件.">
    
    <link rel="preload" href="/assets/css/0.styles.5c293bd6.css" as="style"><link rel="preload" href="/assets/js/app.ae8fcd7c.js" as="script"><link rel="preload" href="/assets/js/3.ccf7cdd0.js" as="script"><link rel="preload" href="/assets/js/2.dadabd95.js" as="script"><link rel="preload" href="/assets/js/46.678e60d8.js" as="script"><link rel="preload" href="/assets/js/5.215cd7b6.js" as="script"><link rel="prefetch" href="/assets/js/1.94b959cf.js"><link rel="prefetch" href="/assets/js/11.ec0df9a4.js"><link rel="prefetch" href="/assets/js/12.a61810aa.js"><link rel="prefetch" href="/assets/js/13.1fcdabd7.js"><link rel="prefetch" href="/assets/js/14.1cf49f3f.js"><link rel="prefetch" href="/assets/js/15.845c3d15.js"><link rel="prefetch" href="/assets/js/16.e5fd4e64.js"><link rel="prefetch" href="/assets/js/17.413dee7e.js"><link rel="prefetch" href="/assets/js/18.f05e8b1e.js"><link rel="prefetch" href="/assets/js/19.3ec65e38.js"><link rel="prefetch" href="/assets/js/20.71a708bf.js"><link rel="prefetch" href="/assets/js/21.0d3adb57.js"><link rel="prefetch" href="/assets/js/22.5e072be9.js"><link rel="prefetch" href="/assets/js/23.8374a4d5.js"><link rel="prefetch" href="/assets/js/24.4b2936c3.js"><link rel="prefetch" href="/assets/js/25.afab61d2.js"><link rel="prefetch" href="/assets/js/26.79328beb.js"><link rel="prefetch" href="/assets/js/27.c7e531b9.js"><link rel="prefetch" href="/assets/js/28.710e29fe.js"><link rel="prefetch" href="/assets/js/29.50b387e0.js"><link rel="prefetch" href="/assets/js/30.5fbe377a.js"><link rel="prefetch" href="/assets/js/31.3ad037cd.js"><link rel="prefetch" href="/assets/js/32.80bb8787.js"><link rel="prefetch" href="/assets/js/33.8f002c48.js"><link rel="prefetch" href="/assets/js/34.6c1285e9.js"><link rel="prefetch" href="/assets/js/35.0408c24a.js"><link rel="prefetch" href="/assets/js/36.60bdbac5.js"><link rel="prefetch" href="/assets/js/37.990a3645.js"><link rel="prefetch" href="/assets/js/38.cd091166.js"><link rel="prefetch" href="/assets/js/39.fd0d605f.js"><link rel="prefetch" href="/assets/js/4.27ff8d29.js"><link rel="prefetch" href="/assets/js/40.411fb4a9.js"><link rel="prefetch" href="/assets/js/41.c3cf765b.js"><link rel="prefetch" href="/assets/js/42.d5c1996f.js"><link rel="prefetch" href="/assets/js/43.0c4804cc.js"><link rel="prefetch" href="/assets/js/44.c6748a1e.js"><link rel="prefetch" href="/assets/js/45.a0535707.js"><link rel="prefetch" href="/assets/js/47.9ebe12dc.js"><link rel="prefetch" href="/assets/js/48.8aeb7910.js"><link rel="prefetch" href="/assets/js/49.4074e322.js"><link rel="prefetch" href="/assets/js/50.dfb27787.js"><link rel="prefetch" href="/assets/js/51.36e4052c.js"><link rel="prefetch" href="/assets/js/52.01d566a2.js"><link rel="prefetch" href="/assets/js/6.b24842c1.js"><link rel="prefetch" href="/assets/js/7.a99aa1b8.js"><link rel="prefetch" href="/assets/js/8.aa1e3ad8.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7fc1ec58.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5c293bd6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">he-tree-vue</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  教程
</a></div><div class="nav-item"><a href="/zh/api.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/zh/buy_pro.html" class="nav-link">
  购买Pro
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="旧版本" class="dropdown-title"><span class="title">旧版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="旧版本" class="mobile-dropdown-title"><span class="title">旧版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/v1/guide.html" class="nav-link">
  v1 教程
</a></li><li class="dropdown-item"><!----> <a href="/zh/v1/api.html" class="nav-link">
  v1 API
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/phphe/he-tree-vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  教程
</a></div><div class="nav-item"><a href="/zh/api.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/zh/buy_pro.html" class="nav-link">
  购买Pro
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="旧版本" class="dropdown-title"><span class="title">旧版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="旧版本" class="mobile-dropdown-title"><span class="title">旧版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/v1/guide.html" class="nav-link">
  v1 教程
</a></li><li class="dropdown-item"><!----> <a href="/zh/v1/api.html" class="nav-link">
  v1 API
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/phphe/he-tree-vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/zh/guide.html" aria-current="page" class="active sidebar-link">教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#导入" class="sidebar-link">导入</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#数据结构" class="sidebar-link">数据结构</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#节点获取" class="sidebar-link">节点获取</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#ui结构和css" class="sidebar-link">UI结构和css</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#使用" class="sidebar-link">使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide.html#通过default-slot自定义显示" class="sidebar-link">通过default slot自定义显示</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/guide.html#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#折叠插件" class="sidebar-link">折叠插件</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#勾选框插件" class="sidebar-link">勾选框插件</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽插件" class="sidebar-link">拖拽插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽启用-禁用" class="sidebar-link">拖拽启用/禁用</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#触发拖拽的元素" class="sidebar-link">触发拖拽的元素</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽流程中的控制" class="sidebar-link">拖拽流程中的控制</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽流程中的相关数据" class="sidebar-link">拖拽流程中的相关数据</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#占位节点" class="sidebar-link">占位节点</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽时打开折叠节点" class="sidebar-link">拖拽时打开折叠节点</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽节点的定位" class="sidebar-link">拖拽节点的定位</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#跨树拖拽" class="sidebar-link">跨树拖拽</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#最大层级" class="sidebar-link">最大层级</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#拖拽时克隆" class="sidebar-link">拖拽时克隆</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/guide.html#边缘滚动" class="sidebar-link">边缘滚动</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#rtl-从右往左显示与拖动" class="sidebar-link">RTL 从右往左显示与拖动</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#自定义使用" class="sidebar-link">自定义使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide.html#自定义css" class="sidebar-link">自定义css</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/guide.html#vuex" class="sidebar-link">Vuex</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#通过script标签引入" class="sidebar-link">通过script标签引入</a></li><li class="sidebar-sub-header"><a href="/zh/guide.html#typescript" class="sidebar-link">typescript</a></li></ul></li><li><a href="/zh/api.html" class="sidebar-link">API</a></li><li><a href="/zh/buy_pro.html" class="sidebar-link">购买Pro</a></li><li><a href="/zh/donate.html" class="sidebar-link">打赏</a></li><li><a href="/zh/migration_guide.html" class="sidebar-link">迁移指南</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="教程"><a href="#教程" class="header-anchor">#</a> 教程</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>如果你使用Vue3</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i <span class="token parameter variable">-P</span> he-tree-vue@3
</code></pre></div><p>如果你使用Vue2</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i <span class="token parameter variable">-P</span> he-tree-vue@2
</code></pre></div><p><a href="#%E9%80%9A%E8%BF%87script%E6%A0%87%E7%AD%BE%E5%BC%95%E5%85%A5">通过script标签引入</a></p> <h2 id="导入"><a href="#导入" class="header-anchor">#</a> 导入</h2> <p>包拆分为了基础树和插件, 可按需引入. 插件有折叠, 勾选框, 拖拽.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> <span class="token comment">// 基础树</span>
  Fold<span class="token punctuation">,</span> Check<span class="token punctuation">,</span> Draggable<span class="token punctuation">,</span> <span class="token comment">// 插件: 折叠, 勾选框, 拖拽</span>
  foldAll<span class="token punctuation">,</span> unfoldAll<span class="token punctuation">,</span> cloneTreeData<span class="token punctuation">,</span> walkTreeData<span class="token punctuation">,</span> getPureTreeData<span class="token punctuation">,</span> <span class="token comment">//方法</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span> <span class="token comment">// 基础样式</span>
</code></pre></div><p>包只有几个简单的css. 折叠和勾选框插件只有功能函数, 没有UI, 需要额外附加. Tree组件有默认插槽可自定义节点UI, 未传入时默认显示<code>node.text</code>. 如果你创建一个组件继承于Tree, 还可以用<code>jsx</code>和钩子函数自定义模板. 此教程会列出许多用法demo和源码.</p> <h2 id="数据结构"><a href="#数据结构" class="header-anchor">#</a> 数据结构</h2> <p>通过prop <code>value</code>传入数据, 树的内部value有别名<code>treeData</code>. 数据是数组, 子树的key是<code>children</code>. 树会直接改变节点和数据结构, 比如折叠插件或给节点增加<code>$folded</code>属性, 这些附加的属性的key都会以<code>$</code>开始. 也可以给节点添加<code>$</code>开始的属性来添加设置. 节点的<a href="/zh/api.html#hidden">$hidden</a>属性可以控制节点的显示. 那么如何给根节点添加设置? 可以传入prop <a href="/zh/api.html#rootnode">rootNode</a>对象作为虚拟的根节点.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>可以通过树的<a href="/zh/api.html#getpuretreedata">getPureTreeData</a>方法获取纯净数据(删除$开始的key).</p> <h2 id="节点获取"><a href="#节点获取" class="header-anchor">#</a> 节点获取</h2> <p>通过外部的<code>path</code>获取节点. <a href="/zh/api.html#path">Path</a>是数组, 包括节点的父级的索引, 如<code>[0,0]</code>, 可以更改<code>path</code>和使用树的方法<a href="/zh/api.html#getnodebypath">getNodeByPath</a>获得节点.</p> <h2 id="ui结构和css"><a href="#ui结构和css" class="header-anchor">#</a> UI结构和css</h2> <div class="language-pug extra-class"><pre class="language-pug"><code><span class="token tag"><span class="token attr-class">.he-tree</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">data-tree-id</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>treeId<span class="token punctuation">}</span></span><span class="token punctuation">)</span></span></span>
  <span class="token tag"><span class="token attr-class">.tree-children</span><span class="token attr-class">.tree-root</span></span>
    <span class="token tag"><span class="token attr-class">.tree-branch</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">data-tree-node-path</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&quot;0&quot;</span></span><span class="token punctuation">)</span></span></span>
      <span class="token tag"><span class="token attr-class">.tree-node-back</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&quot;padding-left: '0px';&quot;</span></span><span class="token punctuation">)</span></span></span>
        <span class="token tag"><span class="token attr-class">.tree-node</span></span>
          <span class="token tag">slot</span>
    <span class="token tag"><span class="token attr-class">.tree-branch</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">data-tree-node-path</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&quot;1&quot;</span></span><span class="token punctuation">)</span></span></span>
      <span class="token tag"><span class="token attr-class">.tree-node-back</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&quot;padding-left: '0px';&quot;</span></span><span class="token punctuation">)</span></span></span>
        <span class="token tag"><span class="token attr-class">.tree-node</span></span>
          <span class="token tag">slot</span>
      <span class="token tag"><span class="token attr-class">.tree-children</span></span>
        <span class="token tag"><span class="token attr-class">.tree-branch</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">data-tree-node-path</span><span class="token punctuation">=</span><span class="token attr-value">&quot;<span class="token number">1</span></span><span class="token punctuation">,</span>0&quot;<span class="token punctuation">)</span></span></span>
          <span class="token tag"><span class="token attr-class">.tree-node-back</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&quot;padding-left: '0px';&quot;</span></span><span class="token punctuation">)</span></span></span>
            <span class="token tag"><span class="token attr-class">.tree-node</span></span>
              <span class="token tag">slot</span>
</code></pre></div><p>上面是一个示例html结构. <code>tree-node-back</code>是一个全宽元素, 可以作为节点的全宽背景. 缩进靠js改变<code>tree-node-back</code>的<code>padding-left</code>实现, 所以不要用css修改<code>tree-node-back</code>的<code>padding-left</code>. 默认缩进20px, 传入prop <code>indent</code>可改变. 如果要修改节点垂直间距, 通过css修改<code>tree-node</code>的<code>margin-bottom</code>, 默认是5px. <code>tree-branch</code>的<code>data-tree-node-path</code>是节点<code>path</code>, 是为了方便通过html元素找节点对象.</p> <p>如果要添加css名和style给节点对应元素, 设置节点的<a href="/zh/api.html#xxxclass">$xxxClass</a>和<a href="/zh/api.html#xxxstyle">$xxxStyle</a>. 可用的有: $branchClass, $nodeBackClass, $nodeClass, $childrenClass, $branchStyle, $nodeBackStyle, $nodeStyle, $childrenStyle</p> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <p>如果你需要在多处使用, 你可以<a href="##%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BD%BF%E7%94%A8">创建一个自己的TreeView组件继承于此组件</a>.</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo1Easiest.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><!----> <h3 id="通过default-slot自定义显示"><a href="#通过default-slot自定义显示" class="header-anchor">#</a> 通过default slot自定义显示</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo2CustomSlot.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{node, index, path, tree}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>{{index}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
      Title: {{node.title}}
      - path: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>{{path.join(',')}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><!----> <h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <p>插件其实也是Vue组件写法, 所以混合基础树和插件就可以了. 使用<a href="/zh/api.html#mixplugins">Tree.mixPlugins</a>方法更方便.</p> <h2 id="折叠插件"><a href="#折叠插件" class="header-anchor">#</a> 折叠插件</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo3Fold.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{node, index, path, tree}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree.toggleFold(node, path)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{node.$folded ? '+' : '-'}}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
      {{node.text}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> Fold<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">Tree</span><span class="token operator">:</span> Tree<span class="token punctuation">.</span><span class="token function">mixPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Fold<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><!----> <p>传入<code>foldingTransitionName</code>设置折叠/展开节点列表的transition名. 也可通过<code>foldingTransition</code>传入你的transition组件. 参考<a href="https://cn.vuejs.org/v2/guide/transitions.html" target="_blank" rel="noopener noreferrer">Vue transition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>如果数据在树初始化前传入, 可以配置<code>foldAllAfterMounted</code>将使树默认折叠. 如果数据在树初始化之后传入而想树默认折叠的话, 使用辅助方法<a href="/zh/api.html#foldall-2">foldAll</a>如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>foldAll<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>
<span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>mytreedata <span class="token operator">=</span> mytreedata <span class="token comment">// 首先挂载数据到vue上</span>
<span class="token function">foldAll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mytreedata<span class="token punctuation">)</span>
</code></pre></div><h2 id="勾选框插件"><a href="#勾选框插件" class="header-anchor">#</a> 勾选框插件</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo4Check.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{node, index, path, tree}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>node.$checked<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree.toggleCheck(node, path)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      {{node.text}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> Check<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">Tree</span><span class="token operator">:</span> Tree<span class="token punctuation">.</span><span class="token function">mixPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Check<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1-1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1-2'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><!----> <p>注意不能使用<code>v-model</code>绑定<code>node.$checked</code>, 否则会改变两次, 相当于没改变.</p> <h2 id="拖拽插件"><a href="#拖拽插件" class="header-anchor">#</a> 拖拽插件</h2> <!----> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo5Draggable.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> Draggable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">Tree</span><span class="token operator">:</span> Tree<span class="token punctuation">.</span><span class="token function">mixPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Draggable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="拖拽启用-禁用"><a href="#拖拽启用-禁用" class="header-anchor">#</a> 拖拽启用/禁用</h3> <p><a href="/zh/api.html#draggable">draggable</a> prop控制该树节点是否可被拖拽. <a href="/zh/api.html#droppable">droppable</a> prop控制该树是否可接受拖拽的节点. 这两个props可以是布尔类型, 也可是方法.</p> <h3 id="触发拖拽的元素"><a href="#触发拖拽的元素" class="header-anchor">#</a> 触发拖拽的元素</h3> <p><a href="/zh/api.html#triggerclass">triggerClass</a> prop指定触发拖拽的元素的css名. 当在有<code>triggerClass</code>的元素内点击时, 除特殊情况, 将触发拖拽.
特殊情况是, 点击的元素是输入框, 下拉框, 或该元素或其父元素有css名<code>undraggable</code>.</p> <p><code>triggerClass</code>默认是<code>tree-node</code>, 所以点击节点内任何地方, 除特殊情况, 都可触发拖拽. 修改<code>triggerClass</code>, 可指定触发拖拽的元素. <code>triggerBySelf</code>可禁止子元素触发拖拽.</p> <h3 id="拖拽流程中的控制"><a href="#拖拽流程中的控制" class="header-anchor">#</a> 拖拽流程中的控制</h3> <p>prop <a href="/zh/api.html#eachdraggable">eachDraggable</a>, <a href="/zh/api.html#eachdroppable">eachDroppable</a> 是钩子方法, 可以全局设定单个节点是否draggable, droppable. 单个节点可通过<a href="/zh/api.html#draggable-2">$draggable</a>, <a href="/zh/api.html#droppable-2">$droppable</a>属性控制. $draggable, $droppable优先级高于eachDraggable, eachDroppable. 子节点会继承父级的$draggable, $droppable. 虚拟根节点对象<a href="/zh/api.html#rootnode">rootNode</a>的$droppable指其他节点是否可成为根节点的子级.</p> <p>prop <a href="/zh/api.html#ondragstart">ondragstart</a>和<a href="/zh/api.html#ondragend">ondragend</a>是两个钩子方法. ondragstart拖拽开始时触发, 返回<code>false</code>可阻止拖拽, <code>ondragstart</code>在源码中是在<code>eachDraggable</code>后面, 两个很类似. <code>ondragend</code>拖拽结束时触发, 返回<code>false</code>可阻止节点位置改变.</p> <p>流程中会触发一些事件, 事件不能影响流程, 钩子方法能影响流程. 开始时触发<code>drag</code>, 拖拽结束前触发<code>before-drop</code>. 拖拽改变了树的结构会触发<code>input</code>, <code>change</code>. 拖拽完成后触发<code>drop</code>.</p> <h3 id="拖拽流程中的相关数据"><a href="#拖拽流程中的相关数据" class="header-anchor">#</a> 拖拽流程中的相关数据</h3> <p>拖拽开始时, 会创建对象<a href="/zh/api.html#store">store</a>, 结束时销毁. 拖拽时有很多数据, 都会被放入<code>store</code>中. store会传给钩子函数和事件, 同时也可以通过<code>tree.treesStore.store</code>访问. 需要注意的是数据的生成顺序, 比如ondragstart发生时, store.targetTree就还不存在.</p> <h3 id="占位节点"><a href="#占位节点" class="header-anchor">#</a> 占位节点</h3> <p>拖拽时, 会生成一个元素默认淡青色背景, 用以标识可放置的位置. 此节点生成时会触发<code>after-placeholder-created</code>, 如果想操作此元素比如添加文字, 只能通过原生js操作.</p> <h3 id="拖拽时打开折叠节点"><a href="#拖拽时打开折叠节点" class="header-anchor">#</a> 拖拽时打开折叠节点</h3> <p>当把节点拖动到一个折叠节点上时, 默认会打开此节点以便拖入其中. 可通过prop <code>unfoldWhenDragover</code>控制. 相关prop: <a href="/zh/api.html#unfoldwhendragoverdelay">unfoldWhenDragoverDelay</a></p> <h3 id="拖拽节点的定位"><a href="#拖拽节点的定位" class="header-anchor">#</a> 拖拽节点的定位</h3> <p>默认使用拖拽节点的左上角坐标来定位, 也可以设置使用鼠标位置来定位. <a href="/zh/api.html#draggingnodepositionmode">draggingNodePositionMode</a></p> <h3 id="跨树拖拽"><a href="#跨树拖拽" class="header-anchor">#</a> 跨树拖拽 <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>pro</span></h3> <p>给允许跨树拖拽的树传入prop <a href="/zh/api.html#crosstree">crossTree</a>. <strong>注意, 允许跨树拽出,拖入的树都要开启才有效.</strong></p> <h3 id="最大层级"><a href="#最大层级" class="header-anchor">#</a> 最大层级 <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>pro</span></h3> <p>传入prop <a href="/zh/api.html#maxlevel">maxLevel</a>将限制树的最大层级数.</p> <h3 id="拖拽时克隆"><a href="#拖拽时克隆" class="header-anchor">#</a> 拖拽时克隆 <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>pro</span></h3> <p>拖拽时不移动原节点而是克隆一个新节点. 使用prop <a href="/zh/api.html#clonewhendrag">cloneWhenDrag</a>开启.</p> <h2 id="边缘滚动"><a href="#边缘滚动" class="header-anchor">#</a> 边缘滚动</h2> <p>这是属于拖拽插件的功能. 如果树处在一个滚动框中, 拖拽到其边缘时需要自动滚动. 此项默认关闭, 使用prop<code>edgeScroll</code>开启. 相关prop: <a href="/zh/api.html#edgescrolltriggermargin">edgeScrollTriggerMargin</a>, <a href="/zh/api.html#edgescrollspeed">edgeScrollSpeed</a>, <a href="/zh/api.html#edgescrolltriggermode">edgeScrollTriggerMode</a>.</p> <p>尝试拖动下面的节点到盒子边缘和页面边缘.
<!----></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo7EdgeScroll.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">edgeScroll</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>400px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> Draggable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">Tree</span><span class="token operator">:</span> Tree<span class="token punctuation">.</span><span class="token function">mixPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Draggable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 3'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 4'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 5'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 6'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="rtl-从右往左显示与拖动"><a href="#rtl-从右往左显示与拖动" class="header-anchor">#</a> RTL 从右往左显示与拖动</h2> <p>使用prop <code>rtl</code>控制.
<!----></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Demo8RTL.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rtl</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">'he-tree-vue/dist/he-tree-vue.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Tree<span class="token punctuation">,</span> Draggable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'he-tree-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">Tree</span><span class="token operator">:</span> Tree<span class="token punctuation">.</span><span class="token function">mixPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Draggable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">treeData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 2-1'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 3'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 4'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 5'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'node 6'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="自定义使用"><a href="#自定义使用" class="header-anchor">#</a> 自定义使用</h2> <p>一般来说, 项目中的树会有一些自定义UI. 所以需要创建一个自己的<code>Treeview</code>组件继承于基础树, 启用需要的插件, 自定义UI, 添加样式. 添加样式时可通过data <a href="/zh/api.html#treeclass">treeClass</a>设置根元素的css名, 再通过嵌套css更改样式.</p> <p>使用继承功能的缺点是难以修改模板. 基础树有3个钩子方法帮助自定义模板, 分别对应头部, 尾部, 节点内3个位置. 这三个方法必须返回<a href="https://vuejs.org/v2/guide/render-function.html" target="_blank" rel="noopener noreferrer">JSX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>格式的模板. <strong>注意, 不要给添加的元素设置树原有的css名,</strong> 如: tree-root, tree-children, tree-node, tree-node-back, tree-branch. 这可能影响拖拽.
<strong>使用继承时注意不要覆盖原来的方法名, 变量名.</strong></p> <ul><li><a href="/zh/api.html#overrideslotdefault">overrideSlotDefault</a> 覆盖默认slot模板, 用以在节点头部或尾部插入内容, 和自定义节点显示.</li> <li><a href="/zh/api.html#blockheader">blockHeader</a> 在树的头部插入内容.</li> <li><a href="/zh/api.html#blockfooter">blockFooter</a> 在树的尾部插入内容.</li></ul> <p>也可以用另一个组件把树组件包装起来使用, 这样自定义模板更方便, 但不能直接访问树的vm实例.</p> <!----> <p><a href="/source.html#demo6">此demo源码</a></p> <h3 id="自定义css"><a href="#自定义css" class="header-anchor">#</a> 自定义css</h3> <p>内置样式很少, 并采用两层嵌套结构. 所以自定义css时也要使用两层嵌套结构.</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.my-tree-view .tree-node</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h2> <p>由于树会改变原数据对象, 所以使用vuex时, 可先用<a href="/zh/api.html#clonetreedata">cloneTreeData</a>方法深度复制数据对象, 再把复制的对象传给树. 在树的input或change事件中使用<a href="/zh/api.html#getpuretreedata">tree.getPureTreeData</a>方法获得纯净数据, 再手动更新数据.</p> <h2 id="通过script标签引入"><a href="#通过script标签引入" class="header-anchor">#</a> 通过script标签引入</h2> <p>从github或npm下载最新版本, 引入dist/he-tree-vue.js或dist/he-tree-vue.min.js, dist/he-tree-vue.css. 可以通过全部变量heTreeVue访问库.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yourpath/dist/he-tree-vue.min.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yourpath/dist/he-tree-vue.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- usage --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> Tree <span class="token operator">=</span> heTreeVue<span class="token punctuation">.</span>Tree<span class="token punctuation">;</span>
  <span class="token keyword">var</span> Fold <span class="token operator">=</span> heTreeVue<span class="token punctuation">.</span>Fold<span class="token punctuation">;</span>
  <span class="token operator">...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="typescript"><a href="#typescript" class="header-anchor">#</a> typescript</h2> <p>项目包含typescript描述文件. 这里是一个vue cli + typescript + he-tree-vue demo: <a href="https://github.com/phphe/vue-cli-typescript-he-tree-test" target="_blank" rel="noopener noreferrer">vue-cli-typescript-he-tree-test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/phphe/he-tree-vue-docs/edit/master/docs/zh/guide.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/zh/api.html">
        API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ae8fcd7c.js" defer></script><script src="/assets/js/3.ccf7cdd0.js" defer></script><script src="/assets/js/2.dadabd95.js" defer></script><script src="/assets/js/46.678e60d8.js" defer></script><script src="/assets/js/5.215cd7b6.js" defer></script>
  </body>
</html>
